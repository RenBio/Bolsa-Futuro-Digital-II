<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atividade Sistema de Produtos</title>
</head>
<body>
<h1>Sistema de Produtos</h1>
<div class="controles">
    <input type="text" id="busca" placeholder="Buscar produto..." onkeyup="aplicarFiltros()">

    <select id="categoria" on change="aplicarFiltros()">
        <option value="todos">Todas as categorias</option>
        <option value="roupas">Roupas</option>
        <option value="calçados">Calçados</option>
        <option value="eletrônicos">Eletrônicos</option>
        <option value="livros">Livros</option>
        <option value="acessórios">Acessórios</option>
    </select>

    <select id="ordenar" onchange="aplicarFiltros()">
        <option value="nenhum">Ordenar por...</option>
        <option value="nome">Nome (A-Z)</option>
        <option value="nome-desc">Nome (Z-A)</option>
        <option value="preco">Preço (Menor-Maior)</option>
        <option value="preco-desc">Preço (Maior-Menor)</option>
    </select>

    <select id="estoque" onchange="aplicarFiltros()">
        <option value="todos">Todos em Estoque</option>
        <option value="disponível">Disponível</option>
        <option value="baixo">Estoque baixo</option>
        <option value="indisponivel">Indisponível</option>
    </select>
</div>

<div class="filtros-avancados">
    <label>Faixa de preço: </label>
    <input type="number" id="preco-min" placeholder="Mínimo" onchange="aplicarFiltros()">
    <span> até </span>
    <input type="number" id="preco-max" placeholder="Máximo" onchange="aplicarFiltros()">

    <label style="margin-left: 15px;">
    <input type="checkbox" id="destaque" onchange="aplicarFiltros()">
    somenteDestaques
    </label>
</div>

<div class="info-pagina">
    <span id="total-produtos">5</span> produtos encontrados
    <button onclick="limparFiltros()">Limpar Filtros</button>
</div>

<div class="produtos" id="lista-Produtos"></div>

<script>
    let produtos =[
        {nome: "camisa Polo", preco: 50, categoria: "roupas", estoque: 20, destaque: true},
        {nome: "Tênis Esportivo", preco: 200, categoria: "calçados", estoque: 15, destaque: true},
        {nome: "Livro de Programação", preco: 40, categoria: "livros", estoque: 8, destaque: false},
        {nome: "Fone de Ouvido", preco: 120, categoria: "eletrônicos", estoque: 3, destaque: true},
        {nome: "Boné", preco: 35, categoria: "acessórios", estoque: 0, destaque: false },
        {nome: "Calça Jeans", preco: 90, categoria:"roupas", estoque: 12, destaque: false},
        {nome: "Sandália", preco: 70, categoria: "calçados", estoque: 5, destaque: false},
        {nome: "Mouse Gamer", preco: 150, categoria: "eletrônicos", estoque: 10, destaque: true},

    ];
    // Função formatar preço
    function formatarPreco(value) {
        return "R$" + value.toFixed(2).replace(".", ".");
    }
    // Função mostrar produtos
    function mostrarProdutos(lista) {
        let area = document.getElementById("listaProdutos");
        ara.innerHTML = "";
    }

    //Atualizar contador
    document.getElementById("total-produtos").textContent = lista.length;

    if (lista.length === 0) {
    area.innerHTML = "<p style='text-align:center;'>Nenhum produto encontrado com esses filtros.</p>";
    return;
    }

    // Exibir produtos filtrados

    lista.forEach(function(produto) {
        let estoqueText = "";
        let estoqueClass = "";

        if (produto.estoque === 0) {
            estoqueText = "Indisponível";
            estoqueClass = "";
        } else if (produto.estoque < 5) {
            estoqueText = "Apenas" + produto.estoque + " em estoque";
            estoqueClass = "baixo";
        } else{
            estoqueText = "Em estoque";
            estoqueClass = "Disponível"
        }

        area.innerHTML += `
        <div class="produto">
        <strong>${produto.nome}</strong><br>
        <div class="preco">${formatarPreco(produto.preco)}</div>
        <div class="categoria">${produto.categoria}</div>
        <div class="estoque>${estoqueClass}">${estoqueText}</div>
        ${produto.destque ? '<div class= "destaque"> Destaque</div>' : ''}
       </div>`;
    });

//Função para aplicar os filtros
function aplicarFiltros(){
    let textoBusca = document.getElementById("busca").value.toLowerCase();
    let categoriaSelecionada = document.getElementById("categoria").value;
    let tipoOrdenacao = document.getElementById('ordenar').value;
    let filtroEstoque = document.getElementById('estoque').value;
    let precoMin = parseFloat(document.getElementById("preco-min").value) || 0;
    let precoMax = parseFloat(document.getElementById("preco-max").value) || Infinity;
    let somenteDestaque = document.getElementById("destaque").checked;
}
// Filtra os produtos
let produtosFiltrados = [];

for (let i = 0; i < produtos.length; i++) {
    let produto = produtos[i];
    let nomeProduto = produto.nome.toLowerCase();
}

// Verifica os filtros

let atendeBusca = textoBusca === "" || nomeProduto.includes(textoBusca);
let atendeCategoria = categoriaSelecionada === "todos" || produto.categoria === categoriaSelecionada;
let atendePrecoMin = produto.preco >= precoMin;
let atendePrecoMax = produto.preco <= precoMax;
let atendeDestaque = !somenteDestaque || produto.destaque;

// Filtro Estoque

let atendeEstoque = true;
if (filtroEstoque === "disponivel") {
    atendeEstoque = produto.estoque > 0;
} else if (filtroEstoque === "baixo") {
    atendeEstoque = produto.estoque > 0 && produto.estoque < 5;
} else if (filtroEstoque === "indisponivel") {
    atendeEstoque = produto.estoque === 0;


// Se passar em todos os filtros, adiciona à lista

// Ordena os produtos caso necessário
if (tipoOrdenacao === "nome") {
    ordenarPorNome(produtosFiltrados, "crescente");
} // ordena por nome (A-Z)

else if (tipoOrdenacao === "nome-desc") {
    ordenarPorNome(produtosFiltrados, "decrescente");
} // ordena por nome (Z-A)

else if (tipoOrdenacao === "preco") {
    ordenarPorPreco(produtosFiltrados, "crescente");
} // ordena por preço em ordem crescente

else if (tipoOrdenacao === "preco-desc") {
    ordenarPorPreco(produtosFiltrados, "decrescente");
} // ordena por preço em ordem decrescente

// Mostra os produtos filtrados

mostrarProdutos(produtosFiltrados);
}
</script>
</body>
</html>